<!-- Jumbotron with Overlay -->
<div class="jumbotron jumbotron-fluid position-relative text-white" style="background-image: url(<%= asset_path('write.jpg') %>); background-size: cover; background-position: center center; height: 400px;">
  <!-- Black overlay -->
  <div class="position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0, 0, 0, 0.5); z-index: 1;"></div>
    <div class="container h-100 d-flex flex-column justify-content-center position-relative" style="z-index: 2;">
        <h1 class="display-4 mb-4">Write for a Better World of Real Estate.</h1>
    </div>
  </div>
</div>


<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>My Guides</h2>
      <%= link_to "Create New", new_guide_path, class: "btn btn-outline-success" %>
    </div>

  <div class="mt-4 mb-3">
    <% if @guides.any? %>
      <% @guides.each do |guide| %>
        <div class="card mb-3">
          <div class="card-body">
            <div class="row align-items-center">
              
              <!-- Image Column -->
              <div class="col-3 col-sm-2 text-center">
                <% if guide.guide_photo.attached? %>
                  <%= image_tag guide.guide_photo, class: "img-fluid rounded", style: "max-height: 100px; object-fit: cover;" %>
                <% else %>
                  <div class="bg-light d-flex justify-content-center align-items-center rounded" style="height:100px;">
                    <i class="bi bi-image text-muted"></i>
                  </div>
                <% end %>
              </div>

              <!-- Text Content -->
              <div class="col-9 col-sm-7 mt-2 mt-sm-0">
                <%= link_to guide_path(guide), class: "text-decoration-none text-dark" do %>
                  <strong><%= guide.title %></strong>
                <% end %>
                <p class="text-muted small mb-1"><%= truncate(guide.body.to_plain_text, length: 50) %></p>

                <!-- Statistics -->
                <p class="text-muted small mb-0">
                  <i class="bi bi-eye"></i> <%= pluralize(guide.total_views, "Guide view") %>
                  <i class="bi bi-person ms-2"></i> <%= pluralize(guide.unique_visitors, "Unique visitor") %>
                  <i class="bi bi-chat-left-text ms-2"></i> <%= pluralize(guide.comments.count, "Comment") %>
                </p>
              </div>

              <!-- Actions Column -->
              <div class="col-12 col-sm-3 text-end mt-3 mt-sm-0 text-muted">
                <p class="small mb-1"><em>Posted on <%= guide.created_at.strftime("%b %d, %Y") %></em></p>

                <%= link_to edit_guide_path(guide), class: "text-secondary me-2" do %>
                  <i class="bi bi-pencil-square"></i>
                <% end %>

                <%= link_to guide_path(guide),
                    data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this guide?" },
                    class: "text-danger" do %>
                  <i class="bi bi-trash3"></i>
                <% end %>
              </div>

            </div>
          </div>
        </div>
      <% end %>

      <%= paginate @guides, param_name: :guides_page %>
    <% else %>
      <p>You havenâ€™t created any guides yet.</p>
    <% end %>
  </div>

</div>