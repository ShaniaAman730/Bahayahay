<div class="container mt-5">
  <h1 class="mb-4">Password Reset Logs</h1>

  <%= form_with url: admin_password_reset_logs_path, method: :get, local: true, class: "mb-4 d-flex" do |f| %>
    <%= f.text_field :query, value: params[:query], placeholder: "Search by user name or email...", class: "form-control me-2" %>
    <%= f.submit "Search", class: "btn btn-primary" %>
  <% end %>

  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Date</th>
        <th>User Reset</th>
        <th>Reset By (Admin)</th>
        <th>New Password</th>
      </tr>
    </thead>
    <tbody>
      <% @password_reset_logs.each do |log| %>
        <tr>
          <td><%= log.created_at.strftime("%b %d, %Y %I:%M %p") %></td>
          <td><%= log.user.email %></td>
          <td><%= log.admin.email %></td>
          <td><%= log.new_password %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <div class="d-flex justify-content-center mt-4">
    <%= paginate @password_reset_logs %>
  </div>

  <div class="mt-3">
    <%= link_to "← Back to All Users", all_users_users_path, class: "btn btn-outline-secondary" %>
  </div>
</div>
